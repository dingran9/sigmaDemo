<link rel="stylesheet" href="../../../static/css/console.css?version=4.2.6.2">
<div class="row" id="regionList_disease_div">
    <div class="col-xs-12 col-sm-7 col-md-7 col-lg-12">
        <div id='regionList_disease'  class="row bs-callout bs-callout-info">
        </div>
        <input id = userType_disease type="hidden">
    </div>
</div>

<ul class="nav nav-tabs bordered" id="disease_tab_ul"></ul>

<div class="tab-content"  id="disease_widget-grid">
    <div class="tab-pane fade active in" id="pro_disease_href" style="padding: 5px;">
        <!-- 按钮 -->
        <div id='disease_btns' class="row margin-bottom-5 col-sm-12 col-xs-12 col-md-12 col-lg-12"
             xmlns="http://www.w3.org/1999/html">
            <a id="btn_disease_refresh" class="btn btn-default" href="javascript:void(0);" onclick="loaddiseaseTable()"><i class="fa fa-refresh"></i> 刷新</a>
            <a id="btn_disease_create"  class="btn btn-success" ><i class="fa fa-plus"></i> 新增</a>
            <a id="btn_disease_edit"  class="btn btn-default disabled"  pname="disease_update"><i class="fa fa-pencil"></i> 编辑</a>
            <a id="btn_disease_delete"  class="btn btn-default disabled"  pname="disease_update"><i class="fa fa-trash-o"></i> 删除</a>
        </div>
        <!-- 按钮 -->
        <!-- widget grid -->
        <section id="disease_widget-grid1" style="margin-bottom:-30px;">

            <!-- row -->
            <div class="row">

                <article class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                    <div class="jarviswidget jarviswidget-color-blueDark" id="wid-id-2-disease" data-widget-editbutton="false">
                        <!-- widget div-->
                        <div>
                            <!-- widget edit box -->
                            <div class="jarviswidget-editbox">
                                <!-- This area used as dropdown edit box -->
                            </div>
                            <!-- end widget edit box -->

                            <div class="widget-body no-padding">
                                <div class="widget-body-toolbar"></div>
                                <div id="disease_list_table">
                                    <table id='disease-table' class='table table-responsive talign_c table-striped table-bordered table-hover smart-form has-tickbox'>
                                        <thead id='disease_thead' style="display: none;"></thead>
                                        <tbody id='disease_tbody'>
                                        <tr class='odd'><td class='dataTables_empty' valign='top' colspan='9' style='border-width:0px;'><span><h3><i class='fa fa-cog fa-spin'></i>正在努力加载...</h3></span></td></tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                    </div>
                    <!-- end widget -->

                </article>
                <!-- WIDGET END -->

            </div>

            <!-- end row -->

            <!-- end row -->

        </section>
    </div>
</div>
<!-- end widget grid -->
<!--新增产品-->
<div id="disease_add_modal" class="text-center" style="display:none;">
    <form id="disease-form">
        <div class="tab-content col-lg-10 row"  style="margin-bottom: 20px;">
            <div class="tab-pane active" id="role_create">
                <div class="order-title">
                    <h1>新增疾病信息</h1>
                    <div class="order-line"></div>
                    <span><a id="disease_add_cancelB" class="pull-right cancelBtn" href="#jsp/disease/getdiseaselist.html" style="float: right;">返回列表</a></span>
                </div>
            </div>
            <table border="0" style="margin-top: 10px;" class="col-lg-12 reg_right_table add_table">

                <tr>
                    <td style="text-align:right;">疾病名称<span class="ezcloud-red" >*</span></td>
                    <td><input type="text" id="disease_name" name="disease_name" maxlength="50"
                               class="form-control" placeholder="疾病名称">

                    </td>
                </tr>
                <tr>
                    <td style="text-align:right;">父级大类<span class="ezcloud-red">*</span>：</td>
                    <td><!--<input type="text" id="disease_parentId" name="disease_parentId" maxlength="50"
                               class="form-control" placeholder="所属分类">-->
                        <select class="form-control" id="disease_parentId" name="disease_parentId">

                        </select>
                    </td>
                </tr>
                <tr class=" image">
                    <td style="text-align:right;">所属分类<span class="ezcloud-red">*</span>：</td>
                    <td><input type="text" id="disease_category" name="disease_category" maxlength="50"
                               class="form-control" placeholder="所属分类">
                    </td>
                </tr>
                <tr class=" ">
                    <td style="text-align:right;">病因<span class="ezcloud-red">*</span>：</td>
                    <td><input type="text" id="disease_pathogeny" name="disease_pathogeny" maxlength="50"
                               class="form-control" placeholder="病因">
                    </td>
                </tr>
                <tr class=" ">
                    <td style="text-align:right;">变化<span class="ezcloud-red">*</span>：</td>
                    <td><input type="text" id="disease_change" name="disease_change" maxlength="50"
                               class="form-control" placeholder="变化">
                    </td>
                </tr>
                <tr class=" ">
                    <td style="text-align:right;">微生物变化<span class="ezcloud-red">*</span>：</td>
                    <td><input type="text" id="disease_microbial_changes" name="disease_microbial_changes" maxlength="50"
                               class="form-control" placeholder="微生物变化">
                    </td>
                </tr>
                <tr class=" ">
                    <td style="text-align:right;">正科相关<span class="ezcloud-red">*</span>：</td>
                    <td><input type="text" id="disease_related_family" name="disease_related_family" maxlength="50"
                               class="form-control" placeholder="正科相关">
                    </td>
                </tr>
                <tr class=" ">
                    <td style="text-align:right;">负科相关<span class="ezcloud-red">*</span>：</td>
                    <td><input type="text" id="disease_related_negative_family" name="disease_related_negative_family" maxlength="50"
                               class="form-control" placeholder="负科相关">
                    </td>
                </tr>
                <tr class=" ">
                    <td style="text-align:right;">正属相关<span class="ezcloud-red">*</span>：</td>
                    <td><input type="text" id="disease_related_genus" name="disease_related_genus" maxlength="50"
                               class="form-control" placeholder="正属相关">
                    </td>
                </tr>
                <tr class=" ">
                    <td style="text-align:right;">负属相关<span class="ezcloud-red">*</span>：</td>
                    <td><input type="text" id="disease_related_negative_genus" name="disease_related_negative_genus" maxlength="50"
                               class="form-control" placeholder="负属相关">
                    </td>
                </tr>
                <tr class=" ">
                    <td style="text-align:right;">与病症相关菌代谢产物<span class="ezcloud-red">*</span>：</td>
                    <td><input type="text" id="disease_pathogen_metabolites" name="disease_pathogen_metabolites" maxlength="50"
                               class="form-control" placeholder="与病症相关菌代谢产物">
                    </td>
                </tr>
                <tr class=" ">
                    <td style="text-align:right;">菌调控的生理过程<span class="ezcloud-red">*</span>：</td>
                    <td><input type="text" id="disease_physiological_process" name="disease_physiological_process" maxlength="50"
                               class="form-control" placeholder="菌调控的生理过程">
                    </td>
                </tr>
                <tr class=" ">
                    <td style="text-align:right;">研究方法 <span class="ezcloud-red">*</span>：</td>
                    <td><input type="text" id="disease_research_method" name="disease_research_method" maxlength="50"
                               class="form-control" placeholder="研究方法 ">
                    </td>
                </tr>
<!--                 <tr class=" "> -->
<!--                     <td style="text-align:right;">文献记录<span class="ezcloud-red">*</span>：</td> -->
<!--                     <td><input type="text" id="disease_documentId" name="disease_documentId" maxlength="50" -->
<!--                                class="form-control" placeholder="文献记录"> -->
<!--                     </td> -->
<!--                 </tr> -->
            </table>
        </div>
        <div class="" style="padding-top: 20px;">
            <span class="col-lg-5 col-md-5 col-sm-5 col-xs-7" style="padding-right:0;" ><a id="disease_add_cancelBtn"  class="btn btn-default col-lg-3 col-md-3 col-sm-3 col-xs-3"  style="float:right;">取消</a></span>
            <span class="col-lg-5 col-md-5 col-sm-5 col-xs-7" style="padding-left:10px;" ><a id="diseaseBtn" onclick="adddisease();" class="btn btn-primary col-lg-3 col-md-3 col-sm-3 col-xs-3"  style="float:left;">新增</a></span>
        </div>
    </form>

</div>
<!--编辑产品-->
<div id="disease_edit_modal" class="text-center" style="display:none;">
    <form id="disease_edit-form">
        <div class="tab-content col-lg-10 row"  style="margin-bottom: 20px;">
            <div class="tab-pane active" id="disease_edit_m_create">
                <div class="order-title">
                    <h1>编辑疾病记录信息</h1>
                    <div class="order-line"></div>
                    <span><a id="disease_edit_cancelB" class="pull-right cancelBtn" href="#jsp/disease/getdiseaselist.html" style="float: right;">返回列表</a></span>
                </div>
            </div>
            <table border="0" style="margin-top: 10px;" class="col-lg-12 reg_right_table add_table">
                <tr>
                    <td style="text-align:right;">疾病名称<span class="ezcloud-red" >*</span></td>
                    <td><input type="text" id="disease_edit_name" name="disease_edit_namet" maxlength="50"
                               class="form-control" placeholder="疾病名称">
                    </td>
                </tr>
                <tr>
                    <td style="text-align:right;">父级大类<span class="ezcloud-red">*</span>：</td>
                    <td><!--<input type="text" id="disease_edit_parentId" name="disease_edit_parentId" maxlength="50"
                               class="form-control" placeholder="所属分类">-->
                        <select class="form-control" id="disease_edit_parentId" name="disease_edit_parentId" > </select>
                    </td>
                </tr>
                <tr class=" image">
                    <td style="text-align:right;">所属分类<span class="ezcloud-red">*</span>：</td>
                    <td><input type="text" id="disease_edit_category" name="disease_edit_category" maxlength="50"
                               class="form-control" placeholder="所属分类">
                    </td>
                </tr>
                <tr class=" ">
                    <td style="text-align:right;">病因<span class="ezcloud-red">*</span>：</td>
                    <td><input type="text" id="disease_edit_pathogeny" name="disease_edit_pathogeny" maxlength="50"
                               class="form-control" placeholder="病因">
                    </td>
                </tr>
                <tr class=" ">
                    <td style="text-align:right;">变化<span class="ezcloud-red">*</span>：</td>
                    <td><input type="text" id="disease_edit_change" name="disease_edit_change" maxlength="50"
                               class="form-control" placeholder="变化">
                    </td>
                </tr>
                <tr class=" ">
                    <td style="text-align:right;">微生物变化<span class="ezcloud-red">*</span>：</td>
                    <td><input type="text" id="disease_edit_microbial_changes" name="disease_edit_microbial_changes" maxlength="50"
                               class="form-control" placeholder="微生物变化">
                    </td>
                </tr>
                <tr class=" ">
                    <td style="text-align:right;">正科相关<span class="ezcloud-red">*</span>：</td>
                    <td><input type="text" id="disease_edit_related_family" name="disease_edit_related_family" maxlength="50"
                               class="form-control" placeholder="正科相关">
                    </td>
                </tr>
                <tr class=" ">
                    <td style="text-align:right;">负科相关<span class="ezcloud-red">*</span>：</td>
                    <td><input type="text" id="disease_edit_related_negative_family" name="disease_edit_related_negative_family" maxlength="50"
                               class="form-control" placeholder="负科相关">
                    </td>
                </tr>
                <tr class=" ">
                    <td style="text-align:right;">正属相关<span class="ezcloud-red">*</span>：</td>
                    <td><input type="text" id="disease_edit_related_genus" name="disease_edit_related_genus" maxlength="50"
                               class="form-control" placeholder="正属相关">
                    </td>
                </tr>
                <tr class=" ">
                    <td style="text-align:right;">负属相关<span class="ezcloud-red">*</span>：</td>
                    <td><input type="text" id="disease_edit_related_negative_genus" name="disease_edit_related_negative_genus" maxlength="50"
                               class="form-control" placeholder="负属相关">
                    </td>
                </tr>
                <tr class=" ">
                    <td style="text-align:right;">与病症相关菌代谢产物<span class="ezcloud-red">*</span>：</td>
                    <td><input type="text" id="disease_edit_pathogen_metabolites" name="disease_edit_pathogen_metabolites" maxlength="50"
                               class="form-control" placeholder="与病症相关菌代谢产物">
                    </td>
                </tr>
                <tr class=" ">
                    <td style="text-align:right;">菌调控的生理过程<span class="ezcloud-red">*</span>：</td>
                    <td><input type="text" id="disease_edit_physiological_process" name="disease_edit_physiological_process" maxlength="50"
                               class="form-control" placeholder="菌调控的生理过程">
                    </td>
                </tr>
                <tr class=" ">
                    <td style="text-align:right;">研究方法 <span class="ezcloud-red">*</span>：</td>
                    <td><input type="text" id="disease_edit_research_method" name="disease_edit_research_method" maxlength="50"
                               class="form-control" placeholder="研究方法 ">
                    </td>
                </tr>
            <!--    <tr class=" ">
                    <td style="text-align:right;">文献记录<span class="ezcloud-red">*</span>：</td>
                    <td><input type="text" id="disease_edit_documentId" name="disease_edit_documentId" maxlength="50"
                               class="form-control" placeholder="文献记录">
                    </td>
                </tr>-->
            </table>
        </div>
    </form>
    <div class="" style="padding-top: 20px;">
        <span class="col-lg-5 col-md-5 col-sm-5 col-xs-7" style="padding-right:0;" ><a id="disease_edit_cancelBtn"  class="btn btn-default col-lg-3 col-md-3 col-sm-3 col-xs-3"  style="float:right;">取消</a></span>
        <span class="col-lg-5 col-md-5 col-sm-5 col-xs-7" style="padding-left:10px;" ><a id="disease_editBtn" class="btn btn-primary col-lg-3 col-md-3 col-sm-3 col-xs-3"  style="float:left;">保存</a></span>
    </div>
    <div class="" style="padding-top: 0;"></div>
</div>
<script type="text/javascript">

// DO NOT REMOVE : GLOBAL FUNCTIONS!
pageSetUp();
// PAGE RELATED SCRIPTS

diseaseloadDataTableScripts();

function diseaseloadDataTableScripts() {
    loadScript("static/smartadmin/js/plugin/datatables/jquery.dataTables-cust.js?version=4.2.6.2", dt_2);

    function dt_2() {
        loadScript("static/smartadmin/js/plugin/datatables/ColReorder.min.js?version=4.2.6.2", dt_3);
    }

    function dt_3() {
        loadScript("static/smartadmin/js/plugin/datatables/FixedColumns.min.js?version=4.2.6.2", dt_4);
    }

    function dt_4() {
        loadScript("static/smartadmin/js/plugin/datatables/ColVis.min.js?version=4.2.6.2", dt_5);
    }

    function dt_5() {
        loadScript("static/smartadmin/js/plugin/datatables/ZeroClipboard.js?version=4.2.6.2", dt_6);
    }

    function dt_6() {
        loadScript("static/smartadmin/js/plugin/datatables/media/js/TableTools.min.js?version=4.2.6.2", dt_7);
    }

    function dt_7() {
        loadScript("static/smartadmin/js/plugin/datatables/DT_bootstrap.js?version=4.2.6.2", dt_8);
    }
    function dt_8() {
        loadScript("biology/disease.js?version=4.2.6.2", diseaseInit);
    }
}

function diseaseInit(){
    //初始化表格
//     listRegionsBtns("regionList_disease","loaddiseaseTableRegion",function(){
//         listdiseaseCatsBtns("disease_tab_ul",function(){
//             loaddiseaseTable();
//         });
//     });
	loaddiseaseTable();
	addProductCatValidate();
    //删除

    $('#btn_disease_delete').unbind("click");
    $('#btn_disease_delete').on("click",function(){
        showConfirm("fa-trash-o", "删除产品", "删除该产品前,请先确定该产品是否已被某产品套餐中引用,若存在,请先禁用或删除该产品套餐，否则该产品套餐中的产品配置仍可被使用。是否要删除该产品?删除后，不可恢复。", function () {
            doPost("/action/disease/delete", {diseaseId: sel_disease_id}, function (objs) {
                if (objs.httpCode == "200") {
                    showMsg("温馨提示", "删除成功。");
                    loaddiseaseTable();
                    $("#disease_widget-grid").show().siblings().hide();
                    $("#disease_btns,#regionList_disease_div,#disease_tab_ul").show();
                } else {
                    console.log("code :" + objs.code + "  msg:" + objs.message);
                    showErrorMsg("", "code :" + objs.code + "  msg:" + objs.message);
                }
            });
        });
    });
    //新增
    $('#btn_disease_create').unbind("click");
    $("#btn_disease_create").on("click",function(){
        clearForm("disease_add");
        $("#disease_add_modal").show().siblings().hide();
        getdiseaselistParents("disease_parentId","",function(){});

    });
    //新增取消
    $('#disease_add_cancelBtn').unbind("click");
    $("#disease_add_cancelBtn").on("click",function(){
        clearForm("disease_add");
        $("#disease_widget-grid").show().siblings().hide();
        $("#disease_btns,#regionList_disease_div,#disease_tab_ul").show();

    });
    function getdiseaselistParents(id,pid,callback){
        var disease = document.getElementById(id).options;
        clearOptions(disease);
        addOption(disease,"---正在加载中---","");
        doPost("/action/disease/findParents",{},function(objs){
            if(objs.httpCode=="200"){
                clearOptions(disease);
            	//添加基础分级：为添加一级疾病打算
                addOption(disease, "无", "-1");
                if (objs.data.length > 0) {
                    for (var i = 0; i < objs.data.length; i++) {
                        addOption(disease, objs.data[i].name, objs.data[i].uuid);
                    }
                }
                if(convertStr(pid)!=""){
                    $("#"+id).val(pid);
                }
                if(callback!=null || callback !=undefined){
                    callback();
                }
            }else{
                console.log("code :" + objs.code + "  msg:" + objs.message);
                showErrorMsg("","code :" + objs.code + "  msg:" + objs.message);
            }
        });
    }

    var $billUnitCount = $("#disease_edit_bill_unit_count");
    $("#btn_disease_edit").unbind("click");
    $("#btn_disease_edit").on("click",function(){
        getdiseaseDetail(function(id){
            console.log("pid="+id)
            getdiseaselistParents("disease_edit_parentId",id,function(){});

        })
    });
    function getdiseaseDetail(callback){
        //获取详情
        doPost("/action/disease/detail",{diseaseId:sel_disease_id},function(objs){
            if(objs.httpCode=="200"){
                $("#disease_edit_name").val(objs.data.name);

                $("#disease_edit_category").val(objs.data.category);
                $("#disease_edit_pathogeny").val(objs.data.pathogeny);
                if(convertStr(objs.data.diseaseAttachedPo)!=""){
                    $("#disease_edit_change").val(objs.data.diseaseAttachedPo.change);
                    $("#disease_edit_microbial_changes").val(objs.data.diseaseAttachedPo.microbialChanges);
                    $("#disease_edit_related_family").val(objs.data.diseaseAttachedPo.relatedFamily);
                    $("#disease_edit_related_negative_family").val(objs.data.diseaseAttachedPo.relatedNegativeFamily);
                    $("#disease_edit_related_genus").val(objs.data.diseaseAttachedPo.relatedGenus);
                    $("#disease_edit_related_negative_genus").val(objs.data.diseaseAttachedPo.relatedNegativeGenus);
                    $("#disease_edit_pathogen_metabolites").val(objs.data.diseaseAttachedPo.pathogenMetabolites);
                    $("#disease_edit_physiological_process").val(objs.data.diseaseAttachedPo.physiologicalProcess);
                    $("#disease_edit_research_method").val(objs.data.diseaseAttachedPo.researchMethod);
                    $("#disease_edit_documentId").val(objs.data.diseaseAttachedPo.documentId);
                }
                $("#disease_edit_modal").show().siblings().hide();
                if(convertStr(objs.data.parentDiseasePo)!=""){
                    $("#disease_edit_parentId").val(objs.data.parentDiseasePo.uuid);
                    callback(objs.data.parentDiseasePo.uuid);
                }else{
                    callback();
                }

            }else{
                console.log("code :" + objs.code + "  msg:" + objs.message);
                showErrorMsg("","code :" + objs.code + "  msg:" + objs.message);
            }
        });
    }
    //编辑取消
    $('#disease_edit_cancelBtn,#disease_add_cancelB,#disease_edit_cancelB').unbind("click");
    $("#disease_edit_cancelBtn,#disease_add_cancelB,#disease_edit_cancelB").on("click",function(){
        $("#disease_widget-grid").show().siblings().hide();
        $("#disease_btns,#regionList_disease_div,#disease_tab_ul").show();
        $("#btn_disease_edit,#btn_disease_delete").addClass("disabled");
        $('input[name="cbx_disease_list"]').attr("checked",false);
    });
    //编辑
    $('#disease_editBtn').unbind("click");
    $("#disease_editBtn").on("click",function(){
//         var diseaseCat_edit_type = $.trim($("#diseaseCat_edit_type").val()),
//             billUnitCount = $billUnitCount.val(),
//             unitCountMin = $.trim($("#disease_edit_unit_count_min").val()),
//             unitCountMax = $.trim($("#disease_edit_unit_count_max").val()),
//             price = $.trim($("#disease_edit_price").val()),
//             description = $.trim($("#disease_edit_description").val()),
//             regionId = $.trim($("#disease_edit_region").val()),
//             units="";

//         if($("#diseaseCat_edit_type option:selected").text()== "bandwidth"){
//             units = getBandWidthValue("#edit_band_test");
//             if(!units){
//                 return;
//             }
//         }

//         if(isNaN(Number(billUnitCount))){
//             showErrorMsg("","计费单位应该是数值");
//             return;
//         }
		
		var _diseaseId = sel_disease_id;
		var _name = $.trim($("#disease_edit_name").val());
	    var _parentId = $.trim($("#disease_edit_parentId").val());
	    var _category = $.trim($("#disease_edit_category").val());
	    var _pathogeny = $.trim($("#disease_edit_pathogeny").val());
	    var _change = $.trim($("#disease_edit_change").val());
	    var _microbialChanges = $.trim($("#disease_edit_microbial_changes").val());
	    var _relatedFamily = $.trim($("#disease_edit_related_family").val());
	    var _relatedNegativeFamily = $.trim($("#disease_edit_related_negative_family").val());
	    var _relatedGenus = $.trim($("#disease_edit_related_genus").val());
	    var _relatedNegativeGenus = $.trim($("#disease_edit_related_negative_genus").val());
	    var _pathogenMetabolites = $.trim($("#disease_edit_pathogen_metabolites").val());
	    var _physiologicalProcess = $.trim($("#disease_edit_physiological_process").val());
	    var _researchMethod = $.trim($("#disease_edit_research_method").val());
	    var _documentId = $.trim($("#disease_edit_documentId").val());
	    var data = {
	    		diseaseId:_diseaseId,
	    		name:_name,//疾病名称
	    		category: _category,//疾病分类
	    		pathogeny:_pathogeny,//病因
	    		parentId:_parentId,//疾病所属大类
	    		change: _change,//变化
	    		microbialChanges: _microbialChanges,//微生物变化
	    		relatedFamily: _relatedFamily,//正科相关
	    		relatedNegativeFamily: _relatedNegativeFamily,//负科相关
	    		relatedGenus: _relatedGenus,//正属相关
	    		relatedNegativeGenus: _relatedNegativeGenus,//负属相关
	    		pathogenMetabolites: _pathogenMetabolites,//与病症相关菌代谢产物 
	    		physiologicalProcess: _physiologicalProcess,//菌调控的生理过程
	    		researchMethod: _researchMethod,//研究方法 
	    		documentId: _documentId//文献id 
	    		};
        doPost("/action/disease/update",data,function(objs){
            if(objs.httpCode=="200"){
                showMsg("温馨提示","编辑成功。");
                loaddiseaseTable();
                $("#disease_widget-grid").show().siblings().hide();
                $("#disease_btns,#regionList_disease_div,#disease_tab_ul").show();
            }else{
                console.log("code :" + objs.code + "  msg:" + objs.message);
                showErrorMsg("","code :" + objs.code + "  msg:" + objs.message);
            }
        });

    });

    //点击tr赋值
}

function changeR(){
    var cat=$('#diseaseCat_type').find("option:checked").val();
    if(cat.indexOf("image")>=0){
        var image = document.getElementById("disease_image").options;
        clearOptions(image);
        addOption(image,"---正在加载中---","");
        doPost("/action/systemImage/notUseList",{regionId:$("#disease_region").val()},function(objs){
            if(objs.httpCode=="200"){
                clearOptions(image);
                if (objs.datas.length > 0) {
                    for (var i = 0; i < objs.datas.length; i++) {
                        addOption(image, objs.datas[i].name, objs.datas[i].id);
                    }
                }
            }else{
                console.log("code :" + objs.code + "  msg:" + objs.message);
                showErrorMsg("","code :" + objs.code + "  msg:" + objs.message);
            }
        });
    }
}

function loaddiseaseTableRegion(id){
    $(id).addClass("btn-primary").siblings().removeClass("btn-primary");
    loaddiseaseTable(id);
}

function changediseaseCatI(obj,id){
    loaddiseaseTable('',id);
}
/**
 * 产品类别列表
 */
function listdiseaseCatsBtns(id,callback){
    doPost("/action/diseaseCat/list",{},function(objs){
        if(objs.httpCode == "200") {
            var data = objs.datas,str = "";
            if(data==null||data.length<=0){
                showErrorMsg("","获取产品类别列表失败！");
                return;
            }
            for(var i=0;i<data.length;i++){
                if(i==0){
                    str +=' <li class="active">'+
                            '<a data-toggle="tab" href="#pro_disease_href" id="disease_pCat_'+data[i].id+'" name="'+data[i].id+'_'+data[i].billType+'_'+data[i].innerName+'_'+data[i].billUnitName+'" onclick="changediseaseCatI(this,'+data[i].id+')" func="'+i+'">'+data[i].name+' </a>'+
                            '</li>';
                }else{
                    str +=' <li>'+
                            '<a data-toggle="tab" href="#pro_disease_href" id="disease_pCat_'+data[i].id+'" name="'+data[i].id+'_'+data[i].billType+'_'+data[i].innerName+'_'+data[i].billUnitName+'" onclick="changediseaseCatI(this,'+data[i].id+')" func="'+i+'">'+data[i].name+' </a>'+
                            '</li>';
                }
            }
            $("#"+id).empty().append(str);
            callback();
        }else{
            console.log("code :" + objs.code + "  msg:"+objs.message);
        }

    });
}

</script>