<div class="row" id="regionList_exp_div">
    <div class="col-xs-12 col-sm-7 col-md-7 col-lg-12">
        <div id='regionList_exp'  class="row bs-callout bs-callout-info">
        </div>
        <input id = userType_exp type="hidden">
    </div>
</div>

<ul class="nav nav-tabs bordered" id="exp_tab_ul"></ul>

<div class="tab-content"  id="exp_widget-grid">
    <div class="tab-pane fade active in" id="pro_exp_href" style="padding: 5px;">
        <!-- 按钮 -->
        <div id='exp_btns' class="row margin-bottom-5 col-sm-12 col-xs-12 col-md-12 col-lg-12"
             xmlns="http://www.w3.org/1999/html">
            <a id="btn_exp_refresh" class="btn btn-default" href="javascript:void(0);" onclick="loadexpTable()"><i class="fa fa-refresh"></i> 刷新</a>
            <a id="btn_exp_create"  class="btn btn-success"  pname="exp_add" data-toggle="modal" data-target="#exp_oper_modal" href="#" ><i class="fa fa-plus"></i> 新增</a>
            <a id="btn_exp_edit"  class="btn btn-default disabled"  pname="exp_update"><i class="fa fa-pencil"></i> 编辑</a>
            <a id="btn_exp_delete"  class="btn btn-default disabled"  pname="exp_update"><i class="fa fa-trash-o"></i> 删除</a>
        </div>
        <!-- 按钮 -->
        <!-- widget grid -->
        <section id="exp_widget-grid1" style="margin-bottom:-30px;">

            <!-- row -->
            <div class="row">

                <article class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                    <div class="jarviswidget jarviswidget-color-blueDark" id="wid-id-2-exp" data-widget-editbutton="false">
                        <!-- widget div-->
                        <div>
                            <!-- widget edit box -->
                            <div class="jarviswidget-editbox">
                                <!-- This area used as dropdown edit box -->
                            </div>
                            <!-- end widget edit box -->

                            <div class="widget-body no-padding">
                                <div class="widget-body-toolbar"></div>
                                <div id="exp_list_table">
                                    <table id='exp-table' class='table table-responsive talign_c table-striped table-bordered table-hover smart-form has-tickbox'>
                                        <thead id='exp_thead' style="display: none;"></thead>
                                        <tbody id='exp_tbody'>
                                        <tr class='odd'><td class='dataTables_empty' valign='top' colspan='9' style='border-width:0px;'><span><h3><i class='fa fa-cog fa-spin'></i>正在努力加载...</h3></span></td></tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                    </div>
                    <!-- end widget -->

                </article>
                <!-- WIDGET END -->

            </div>

            <!-- end row -->

            <!-- end row -->

        </section>
    </div>
</div>
<!-- end widget grid -->
<!--新增实验记录-->
<div id="exp_add_modal" class="text-center" style="display:none;">
    <form id="exp-form">
        <div class="tab-content col-lg-10 row"  style="margin-bottom: 20px;">
            <div class="tab-pane active" id="role_create">
                <div class="order-title">
                    <h1>新增实验记录</h1>
                    <div class="order-line"></div>
                    <span><a id="exp_add_cancelB" class="pull-right cancelBtn" href="#jsp/exp/getexplist.html" style="float: right;">返回列表</a></span>
                </div>
            </div>
            <table border="0" style="margin-top: 10px;" class="col-lg-12 reg_right_table add_table">

                <tr>
                    <td style="text-align:right;">实验类型<span class="ezcloud-red" >*</span></td>
                    <td>
                        <div  class="">
                        <select class="form-control" id="exp_type" name="exp_type" onchange="changeExperimentalType()">
                    		<option value="1">干预型实验</option>
                    		<option value="0">观察型实验</option>
                        </select>
                            </div>
                      </td>
                </tr>
                <tr>
                    <td style="text-align:right;">实验结果类型<span class="ezcloud-red" >*</span></td>
                    <td>
                        <div  class="">
                        <select class="form-control" id="exp_result_type" name="exp_type" onchange="changeResultType('exp_add_modal','exp_result_type');">
                    		<option value="0" selected="selected">干预物直接对疾病产生影响 </option>
                    		<option value="1">干预物通过对微生物的影响对疾病产生影响 </option>
                    		<option value="2">干预物通过对生理过程的影响对疾病产生影响 </option>
                    		<option value="3">疾病和微生物的关系 </option>
                    		<option value="4">疾病生理过程关系 </option>
	                        <option value="5">疾病和生理过程、微生物的关系 </option>
	                        <option value="6">干预物对微生物对生理过程最终对疾病产生关系 </option>
                        </select>
                            </div>
                      </td>
                </tr>

                <tr>
                    <td style="text-align:right;">文献<span class="ezcloud-red">*</span>：</td>
                    <td>
                        <div  class="col-md-9 col-xs-9 col-sm-9 col-lg-6 no-padding">
                            <select  name="documentA_ins"  class="select2" data-select-search="true" id="document_insList" onchange="vDocument()"></select>
                            <span class="help-block" id="document_insList_block" for="document_insList"></span>
                        </div>
                    </td>
                </tr>
                <tr id="exp_diseaseId_tr">
                    <td style="text-align:right;">疾病类型<span class="ezcloud-red">*</span>：</td>
                    <td><!--<input type="text" id="exp_diseaseId" name="exp_diseaseId" maxlength="30"
                               class="form-control" placeholder="疾病类型">-->
                        <div  class="">
                            <select class="form-control" id="exp_diseaseId" name="exp_diseaseId" ></select>
                        </div>
                    </td>
                </tr>
                <tr class="ex_type_a ex_type_b ex_type_c  ex_type_g" id="exp_intervention_tr">
                    <td style="text-align:right;">干预物<span class="ezcloud-red">*</span>：</td>
                    <td><!--<input type="text" id="exp_intervention" name="exp_intervention" maxlength="30"
                               class="form-control" placeholder="干预">-->
                        <div  class="">
                        <select class="form-control" id="exp_intervention" name="exp_intervention" ></select>
                            </div>
                    </td>
                </tr>
                <tr class="ex_type_a ex_type_b ex_type_c" id="exp_intervention_effect_tr">
                    <td style="text-align:right;">干预对疾病作用<span class="ezcloud-red">*</span>：</td>
                    <td><!--<input type="text" id="exp_intervention_effect" name="exp_intervention_effect" maxlength="5"
                               class="form-control" placeholder="干预对疾病作用">-->
                        <div  class="">
                        <select class="form-control" id="exp_intervention_effect" name="exp_intervention_effect" ></select>
                            </div>
                    </td>
                </tr>
                <tr class="ex_type_b ex_type_d ex_type_f ex_type_g" id="exp_microorganism_tr" style="display:none">
                    <td style="text-align:right;">微生物<span class="ezcloud-red">*</span>：</td>
                    <td><!--<input type="text" id="exp_microorganism" name="exp_microorganism" maxlength="5"
                               class="form-control" placeholder="微生物">-->
                        <div  class="">
                        <select class="form-control" id="exp_microorganism" name="exp_microorganism" ></select>
                            </div>
                    </td>
                </tr>
                <tr class="ex_type_b ex_type_d  ex_type_f" id="exp_strain_variation_tr" style="display:none">
                    <td style="text-align:right;">菌种变化<span class="ezcloud-red">*</span>：</td>
                    <td><!--<input type="text" id="exp_strain_variation" name="exp_strain_variation" maxlength="5"
                               class="form-control" placeholder="菌种变化">-->
                        <div  class="">
                        <select class="form-control" id="exp_strain_variation" name="exp_strain_variation" ></select>
                            </div>
                    </td>
                </tr>
                <tr id="exp_bacteria_metabolism_tr" style="display:none">
                    <td style="text-align:right;">菌代谢物质<span class="ezcloud-red">*</span>：</td>
                    <td><!--<input type="text" id="exp_bacteria_metabolism" name="exp_bacteria_metabolism" maxlength="5"
                               class="form-control" placeholder="菌代谢物质">-->
                        <div  class="">
                        <select class="form-control" id="exp_bacteria_metabolism" name="exp_bacteria_metabolism" ></select>
                            </div>
                    </td>
                </tr>
                <tr class="ex_type_c ex_type_e  ex_type_f  ex_type_g" id="exp_physiological_process_tr" style="display:none">
                    <td style="text-align:right;">生理过程<span class="ezcloud-red">*</span>：</td>
                    <td><!--<input type="text" id="exp_physiological_process" name="exp_physiological_process" maxlength="5"
                               class="form-control" placeholder="生理过程">-->
                        <div  class="">
                        <select class="form-control" id="exp_physiological_process" name="exp_physiological_process" ></select>
                            </div>
                    </td>
                </tr>
                <tr class="ex_type_c ex_type_f ex_type_e" id="exp_physiological_process_change_tr" style="display:none">
                    <td style="text-align:right;">生理过程的变化<span class="ezcloud-red">*</span>：</td>
                    <td><!--input type="text" id="exp_physiological_process_change" name="exp_physiological_process_change" maxlength="5"
                               class="form-control" placeholder="生理过程的变化">-->
                        <div  class="">
                        <select class="form-control" id="exp_physiological_process_change" name="exp_physiological_process_change" ></select>
                   </div>
                    </td>
                </tr>
                <tr class="ex_type_d ex_type_e ex_type_f"  style="display:none">
                    <td style="text-align:right;">引发源<span class="ezcloud-red">*</span>：</td>
                    <td>
                        <div  class="">
                        <select class="form-control" id="exp_source_element" name="exp_animal_model" ></select>
                            </div>
                    </td>
                </tr>
                <tr class="ex_type_a ex_type_b ex_type_c  ex_type_g">
                    <td style="text-align:right;">干预物的注释<span class="ezcloud-red">*</span>：</td>
                     <td><input type="text" id="exp_intervention_note" name="exp_edit_namet" maxlength="50"
                              class="form-control" placeholder="干预物的注释"/>
<!--                         <select class="form-control" id="exp_edit_intervention_note" name="exp_edit_intervention_note" ></select> -->
                    </td>
                </tr>
                <tr id="exp_hostName_tr">
                    <td style="text-align:right;">宿主<span class="ezcloud-red">*</span>：</td>
                    <td><!--<input type="text" id="exp_hostName" name="exp_hostName" maxlength="5"
                               class="form-control" placeholder="宿主">-->
                        <div  class="">
                        <select class="form-control" id="exp_hostName" name="exp_hostName" ></select>
                            </div>
                    </td>
                </tr>
                <tr id="exp_animal_model_tr">
                    <td style="text-align:right;">动物模型/人群特征<span class="ezcloud-red">*</span>：</td>
                    <td><!--<input type="text" id="exp_animal_model" name="exp_animal_model" maxlength="5"
                               class="form-control" placeholder="动物模型/人群特征">-->
                        <div  class="">
                        <select class="form-control" id="exp_animal_model" name="exp_animal_model" ></select>
                            </div>
                    </td>
                </tr>
            </table>
        </div>
        <div class="" style="padding-top: 20px;">
            <span class="col-lg-5 col-md-5 col-sm-5 col-xs-7" style="padding-right:0;" ><a id="exp_add_cancelBtn"  class="btn btn-default col-lg-3 col-md-3 col-sm-3 col-xs-3"  style="float:right;">取消</a></span>
            <span class="col-lg-5 col-md-5 col-sm-5 col-xs-7" style="padding-left:10px;" ><a id="expBtn" onclick="addExperimentalResult();" class="btn btn-primary col-lg-3 col-md-3 col-sm-3 col-xs-3"  style="float:left;">新增</a></span>
        </div>
    </form>

</div>
<!--编辑产品-->
<div id="exp_edit_modal" class="text-center" style="display:none;">
    <form id="exp_edit-form">
        <div class="tab-content col-lg-10 row"  style="margin-bottom: 20px;">
            <div class="tab-pane active" id="exp_edit_m_create">
                <div class="order-title">
                    <h1>编辑实验结果</h1>
                    <div class="order-line"></div>
                    <span><a id="exp_edit_cancelB" class="pull-right cancelBtn" href="#../../action/cniaas/exps/exp.html" style="float: right;">返回产品列表</a></span>
                </div>
            </div>
            <table border="0" style="margin-top: 10px;" class="col-lg-12 reg_right_table add_table">
                <tr>
                    <td style="text-align:right;">实验类型<span class="ezcloud-red" >*</span></td>
                    <td>  <div  class=""><select class="form-control" id="exp_edit_type" name="exp_edit_type" onchange="changeR()">
                    		<option value="1">干预型实验</option>
                    		<option value="0">观察型实验</option>
                        </select></div>
                      </td>
                </tr>
                <tr>
                    <td style="text-align:right;">实验结果类型<span class="ezcloud-red" >*</span></td>
                    <td> <div  class=""> <select class="form-control" id="exp_edit_result_type" name="exp_edit_type" onchange="changeResultType('exp_edit_modal','exp_edit_result_type');">
                        <option value="0">干预物直接对疾病产生影响 </option>
                        <option value="1">干预物通过对微生物的影响对疾病产生影响 </option>
                        <option value="2">干预物通过对生理过程的影响对疾病产生影响 </option>
                        <option value="3">疾病和微生物的关系 </option>
                        <option value="4">疾病生理过程关系 </option>
                        <option value="5">疾病和生理过程、微生物的关系 </option>
                        <option value="6">干预物对微生物对生理过程最终对疾病产生关系 </option>
                        </select></div>
                      </td>
                </tr>

                <tr>
                    <td style="text-align:right;">文献<span class="ezcloud-red">*</span>：</td>
                    <td>
                        <div  class="col-md-9 col-xs-9 col-sm-9 col-lg-6 no-padding">
                            <select  name="documentA_ins"  class="select2" data-select-search="true" id="edit_document_insList" onchange="vDocument()"></select>
                            <span class="help-block" id="edix_document_insList_block" for="document_insList"></span>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td style="text-align:right;">疾病类型<span class="ezcloud-red">*</span>：</td>
                    <td><!--<input type="text" id="exp_edit_diseaseId" name="exp_edit_diseaseId" maxlength="5"
                               class="form-control" placeholder="疾病类型">-->
                        <div  class=""><select class="form-control" id="exp_edit_diseaseId" name="exp_animal_model" ></select>
                    </div></td>
                </tr>
                <tr class=" ex_type_a ex_type_b ex_type_c  ex_type_g">
                    <td style="text-align:right;">干预物<span class="ezcloud-red">*</span>：</td>
                    <td><!--<input type="text" id="exp_edit_intervention" name="exp_edit_intervention" maxlength="5"
                               class="form-control" placeholder="干预">-->
                        <div  class=""><select class="form-control" id="exp_edit_intervention" name="exp_animal_model" ></select>
                    </div></td>
                </tr>
                <tr class=" ex_type_a ex_type_b ex_type_c">
                    <td style="text-align:right;">干预对疾病作用<span class="ezcloud-red">*</span>：</td>
                    <td><!--<input type="text" id="exp_edit_intervention_effect " name="exp_edit_intervention_effect" maxlength="5"
                               class="form-control" placeholder="干预对疾病作用">-->
                        <div  class="">  <select class="form-control" id="exp_edit_intervention_effect" name="exp_animal_model" ></select>
                    </div></td>
                </tr>
                <tr class=" ex_type_b ex_type_d  ex_type_f ex_type_g" style="display:none">
                    <td style="text-align:right;">微生物<span class="ezcloud-red">*</span>：</td>
                    <td><!--<input type="text" id="exp_edit_microorganism" name="exp_edit_microorganism" maxlength="5"
                               class="form-control" placeholder="微生物">-->
                        <div  class=""> <select class="form-control" id="exp_edit_microorganism" name="exp_animal_model" ></select>
                   </div> </td>
                </tr>
                <tr class=" ex_type_b ex_type_d  ex_type_f" style="display:none" >
                    <td style="text-align:right;">菌种变化<span class="ezcloud-red">*</span>：</td>
                    <td><!--<input type="text" id="exp_edit_strain_variation" name="exp_edit_strain_variation" maxlength="5"
                               class="form-control" placeholder="菌种变化">-->
                        <div  class="">   <select class="form-control" id="exp_edit_strain_variation" name="exp_animal_model" ></select>
                    </div></td>
                </tr>
                <tr style="display:none">
                    <td style="text-align:right;">菌代谢物质<span class="ezcloud-red">*</span>：</td>
                    <td><!--<input type="text" id="exp_edit_bacteria_metabolism" name="exp_edit_bacteria_metabolism" maxlength="5"
                               class="form-control" placeholder="菌代谢物质">-->
                        <div  class="">  <select class="form-control" id="exp_edit_bacteria_metabolism" name="exp_animal_model" ></select>
                    </div></td>
                </tr>
                <tr class=" ex_type_c ex_type_e  ex_type_f ex_type_g" style="display:none" >
                    <td style="text-align:right;">生理过程<span class="ezcloud-red">*</span>：</td>
                    <td><!--<input type="text" id="exp_edit_physiological_process" name="exp_edit_physiological_process" maxlength="5"
                               class="form-control" placeholder="生理过程">-->
                        <div  class=""><select class="form-control" id="exp_edit_physiological_process" name="exp_animal_model" ></select>
                    </div></td>
                </tr>
                <tr class=" ex_type_c ex_type_e  ex_type_f"  style="display:none">
                    <td style="text-align:right;">生理过程的变化<span class="ezcloud-red">*</span>：</td>
                    <td><!--<input type="text" id="exp_edit_physiological_process_change" name="exp_edit_physiological_process_change" maxlength="5"
                               class="form-control" placeholder="生理过程的变化">-->
                        <div  class="">  <select class="form-control" id="exp_edit_physiological_process_change" name="exp_animal_model" ></select>
                   </div> </td>
                </tr>
                <tr class=" ex_type_d ex_type_e ex_type_f"  style="display:none">
                    <td style="text-align:right;">引发源<span class="ezcloud-red">*</span>：</td>
                    <td>
                       <select class="form-control" id="exp_edit_source_element" name="exp_animal_model" ></select>
                    </td>
                </tr>
                <tr class="ex_type_a ex_type_b ex_type_c  ex_type_g">
                    <td style="text-align:right;">干预物的注释<span class="ezcloud-red">*</span>：</td>
                     <td><input type="text" id="exp_edit_intervention_note" name="exp_edit_namet" maxlength="50"
                              class="form-control" placeholder="干预物的注释"/>
<!--                         <select class="form-control" id="exp_edit_intervention_note" name="exp_edit_intervention_note" ></select> -->
                    </td>
                </tr>
                <tr>
                    <td style="text-align:right;">宿主<span class="ezcloud-red">*</span>：</td>
                    <td><!--<input type="text" id="exp_edit_hostName" name="exp_edit_hostName" maxlength="5"
                               class="form-control" placeholder="宿主">-->
                       <select class="form-control" id="exp_edit_hostName" name="exp_animal_model" ></select>
                </td>
                </tr>
                <tr>
                    <td style="text-align:right;">动物模型/人群特征<span class="ezcloud-red">*</span>：</td>
                    <td><!--<input type="text" id="exp_edit_animal_model" name="exp_edit_animal_model" maxlength="5"
                               class="form-control" placeholder="动物模型/人群特征">-->
                        <div  class="">  <select class="form-control" id="exp_edit_animal_model" name="exp_animal_model" ></select>
                    </div></td>
                </tr>
            </table>
        </div>
    </form>
    <div class="" style="padding-top: 20px;">
        <span class="col-lg-5 col-md-5 col-sm-5 col-xs-7" style="padding-right:0;" ><a id="exp_edit_cancelBtn"  class="btn btn-default col-lg-3 col-md-3 col-sm-3 col-xs-3"  style="float:right;">取消</a></span>
        <span class="col-lg-5 col-md-5 col-sm-5 col-xs-7" style="padding-left:10px;" ><a id="exp_editBtn" class="btn btn-primary col-lg-3 col-md-3 col-sm-3 col-xs-3"  style="float:left;">保存</a></span>
    </div>
    <div class="" style="padding-top: 0;"></div>
</div>

<!-- 文献列表 -->
<div class="modal fade" id="disk_expand_modal" tabindex="-1" role="dialog" aria-labelledby="disk_expand_modal_label" aria-hidden="true">
    <div class="modal-dialog" style="width: 600px;">
        <div class="col-sm-12   col-xs-12 col-md-12 col-lg-12">
            <div class="modal-content">
                <div class="modal-header">
                    <a class="close" href="#" data-dismiss="modal" aria-hidden="true">&times;</a>
                    <h3 class="modal-title" id="disk_expand_modal_label">磁盘扩容</h3>
                </div>
                <div class="modal-body no-padding">
                    <form id="disk-wizard-expand" novalidate="novalidate" class="smart-form">
                        <div id="expand_disk_modal" class="form-horizontal">
                            <div class="form-group has-success form_group col-md-12 col-xs-12 col-sm-12 col-lg-12" id="expand_diskS_div" style="margin-top: 20px;" >
                                <label class="col-md-2 col-xs-2 col-sm-2 col-lg-2 control-label  text-right" for="expand_disk_size"  name="diskAddSize">容量：</label>
                                <div class="col-md-9 col-xs-9 col-sm-9 col-lg-9 " style="padding:0;">
                                    <div name="diskAddSize" id="disk_expand_size" style="width: 75%;margin-left: 7px;" class='form_slider'></div>
                                    <input value="1" maxlength="3" id="expand_disk_size" style="width: 30px;margin-top: 15px;" onkeyup="checkDiskSizeExpand()" name="diskAddSize" >GB
                                    <span id="expand_diskS_block" class="help-block" for="expand_disk_size" style="margin-top: -5px;"></span>
                                </div>
                                <font style="color:red;margin-top: 10px;" class="control-label col-md-1 col-xs-1 col-sm-1 col-lg-1 text-center">*</font>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer" style="margin-top:100px;">
                    <button type="button" id="btn_Expand_close" class="btn btn-default" data-dismiss="modal">关闭</button>
                    <button type="button" id="btn_disk_expand_confirm" class="btn btn-primary" onclick="expandDiskSize();" style="border:solid 1px #ccc;">确定 </button>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- 文献列表 -->
<script type="text/javascript">

// DO NOT REMOVE : GLOBAL FUNCTIONS!
pageSetUp();
// PAGE RELATED SCRIPTS

exploadDataTableScripts();

function exploadDataTableScripts() {
    loadScript("../../static/js/plugin/datatables/jquery.dataTables-cust.js?version=4.2.6.2", dt_2);

    function dt_2() {
        loadScript("../../static/js/plugin/datatables/ColReorder.min.js?version=4.2.6.2", dt_3);
    }

    function dt_3() {
        loadScript("../../static/js/plugin/datatables/FixedColumns.min.js?version=4.2.6.2", dt_4);
    }

    function dt_4() {
        loadScript("../../static/js/plugin/datatables/ColVis.min.js?version=4.2.6.2", dt_5);
    }

    function dt_5() {
        loadScript("../../static/js/plugin/datatables/ZeroClipboard.js?version=4.2.6.2", dt_6);
    }

    function dt_6() {
        loadScript("../../static/js/plugin/datatables/media/js/TableTools.min.js?version=4.2.6.2", dt_7);
    }

    function dt_7() {
        loadScript("../../static/js/plugin/datatables/DT_bootstrap.js?version=4.2.6.2", dt_8);
    }
    function dt_8() {
        loadScript("biology/experimental.js?version=4.2.6.2", experimentalInit);
    }

}
function getexdictlist(id,code,pid){
    var disease = document.getElementById(id).options;
    if(disease==undefined || disease==null){
        return;
    }
    clearOptions(disease);
    addOption(disease,"---正在加载中---","");
    doPost("/action/dictItem/list",{dictmanagerCode:code},function(objs){
        if(objs.httpCode=="200"){
            clearOptions(disease);
            if (objs.data.length > 0) {
                for (var i = 0; i < objs.data.length; i++) {
                    addOption(disease, objs.data[i].name, objs.data[i].value);
                }
            }
            if(convertStr(pid)!=""){
                $("#"+id).val(pid);
            }

        }else{
            console.log("code :" + objs.code + "  msg:" + objs.message);
            showErrorMsg("","code :" + objs.code + "  msg:" + objs.message);
        }
    });
}
function getDocumentlist(id,code,pid){
    var disease = document.getElementById(id).options;
    if(disease==undefined || disease==null){
        return;
    }
    clearOptions(disease);
    addOption(disease,"---正在加载中---","");
    doPost("/action/document/list",{},function(objs){
        if(objs.httpCode=="200"){
            clearOptions(disease);
            if (objs.data.length > 0) {
                for (var i = 0; i < objs.data.length; i++) {
                    addOption(disease, objs.data[i].name, objs.data[i].uuid);
                    if(convertStr(pid)!="" && objs.data[i].uuid==pid){
//                        $("#s2id_"+id).find("a").find("span").text(objs.data[i].name);
                        $("#"+id).val(pid);
//                        $("#s2id_edit_document_insList a span").text(objs.data[i].name);
                        $(".select2-chosen").html(objs.data[i].name);
                    }
                }
            }


        }else{
            console.log("code :" + objs.code + "  msg:" + objs.message);
            showErrorMsg("","code :" + objs.code + "  msg:" + objs.message);
        }
    });
}

function getdiseaselistChilds(id,pid,callback){
    var disease = document.getElementById(id).options;
    if(disease==undefined || disease==null){
        return;
    }
    clearOptions(disease);
    addOption(disease,"---正在加载中---","");
    doPost("/action/disease/findChildren",{},function(objs){
        if(objs.httpCode=="200"){
            clearOptions(disease);
            if (objs.data.length > 0) {

                for (var i = 0; i < objs.data.length; i++) {
                    addOption(disease, objs.data[i].name, objs.data[i].uuid);
                    if(i==0){
                        $("#"+id).val(objs.data[i].uuid);
                    }
                }
            }
            console.log("pid--->"+pid);
            if(convertStr(pid)!=""){
                $("#"+id).val(pid);
            }
            if(callback!=null || callback !=undefined){
                callback();
            }
        }else{
            console.log("code :" + objs.code + "  msg:" + objs.message);
            showErrorMsg("","code :" + objs.code + "  msg:" + objs.message);
        }
    });
}

function expermentDetail(callback){
    //获取详情
    doPost("/action/experimentalResult/detail",{experimentalId:sel_exp_id},function(objs){
        if(objs.httpCode=="200"){
//                     $("#exp-billUtilName-e").html(objs.data.productCat.billUnitName);
            $("#exp_edit_modal").show().siblings().hide();
            //实验结果类型
            $("#exp_edit_type").val(objs.data.experimentType);
            //疾病id
            $("#exp_edit_diseaseId").val(objs.data.diseaseId);
            //实验类型：干预、观察
            $("#exp_edit_result_type").val(objs.data.type);
            //干预物
            $("#exp_edit_intervention").val(objs.data.intervention);
            //干预物影响
            $("#exp_edit_intervention_effect").val(objs.data.interventionEffect);
            //微生物
            $("#exp_edit_microorganism").val(objs.data.microorganism);
            //菌种变化
            $("#exp_edit_strain_variation").val(objs.data.strainVariation);
            //菌代谢物质
//                     $("#exp_edit_bacteria_metabolism").val(objs.data.);
            //生理过程
            $("#exp_edit_physiological_process").val(objs.data.physiologicalProcess);
            //生理过程变化
            $("#exp_edit_physiological_process_change").val(objs.data.physiologicalProcessChange);
            //干预物注释
            $("#exp_edit_intervention_note").val(objs.data.interventionNote);
            //引发源
            $("#exp_edit_source_element").val(objs.data.sourceElement);
            //宿主
            $("#exp_edit_hostName").val(objs.data.hostName);
            //动物模型/人群特征
            $("#exp_edit_animal_model").val(objs.data.animalModel);
            changeResultType("exp_edit_modal",'exp_edit_result_type');
            callback(objs);
        }else{
            console.log("code :" + objs.code + "  msg:" + objs.message);
            showErrorMsg("","code :" + objs.code + "  msg:" + objs.message);
        }
    });
}
function experimentalInit(){
    //初始化表格
//     listRegionsBtns("regionList_product","loadproductTableRegion",function(){
//         listProductCatsBtns("product_tab_ul",function(){
//             loadproductTable();
//         });
//     });
	loadexpTable();//加载数据
	/******初始化按钮绑定*****/
    $(".select2-chosen").addClass("text-left");

    //删除
    $('#btn_exp_delete').unbind("click");
    $('#btn_exp_delete').on("click",function(){
        showConfirm("fa-trash-o", "删除实验结果记录", "请确定是否删除该实验结果记录，删除操作不可恢复！", function () {
            doPost("/action/experimentalResult/delete", {experimentalId: sel_exp_id}, function (objs) {
                if (objs.httpCode == "200") {
                    showMsg("温馨提示", "删除成功。");
                    loadexpTable();
                    $("#exp_widget-grid").show().siblings().hide();
                    $("#exp_btns,#regionList_exp_div,#exp_tab_ul").show();
                } else {
                    console.log("code :" + objs.code + "  msg:" + objs.message);
                    showErrorMsg("", "code :" + objs.code + "  msg:" + objs.message);
                }
            });
        });
    });
    //新增
    $('#btn_exp_create').unbind("click");
    $("#btn_exp_create").on("click",function(){
        clearForm("exp_add");
        //获取当前地域
//         var regionId=  $("#regionList_exp a.btn-primary").attr("data-value");
//         initProductRegion("exp_region",function(){
//             initProductCat(function(){
//                 changeProductCat();
//             });
//         },regionId);
        //
        getdiseaselistChilds("exp_diseaseId","",function(){});
        getexdictlist("exp_intervention","intervention","");
        getexdictlist("exp_intervention_effect","intervention_effect","");
        getexdictlist("exp_microorganism","microorganism","");
        getexdictlist("exp_strain_variation","strain_variation","");
        getexdictlist("exp_bacteria_metabolism","bacteria_metabolism","");
        getexdictlist("exp_physiological_process","physiological_process","");
        getexdictlist("exp_physiological_process_change","physiological_process_change","");
        getexdictlist("exp_source_element","source_element","");
        //干预物注释：修改为手动填写text
//         getexdictlist("exp_intervention_note","intervention_note","");
        getexdictlist("exp_hostName","host_name","");
        getexdictlist("exp_animal_model","animal_model","");

        getDocumentlist("document_insList","","");

        $("#exp_result_type").val("0");
        $("#exp_type").val("0");
        $("#exp_add_modal").show().siblings().hide();

    });
    //新增取消
    $('#exp_add_cancelBtn').unbind("click");
    $("#exp_add_cancelBtn").on("click",function(){
        clearForm("exp_add");
        $("#exp_widget-grid").show().siblings().hide();
        $("#exp_btns,#regionList_exp_div,#exp_tab_ul").show();

    });
	//编辑跳转
    var $billUnitCount = $("#exp_edit_bill_unit_count");
    $("#btn_exp_edit").unbind("click");
    $("#btn_exp_edit").on("click",function(){
        expermentDetail(function(obj){

            console.log("obj.data.intervention-->"+obj.data.intervention);
            var uuid=convertStr(obj.data.diseasePo)==""?"":obj.data.diseasePo.uuid;
            getdiseaselistChilds("exp_edit_diseaseId",uuid,function(){});
            getexdictlist("exp_edit_intervention","intervention",obj.data.intervention);
            getexdictlist("exp_edit_intervention_effect","intervention_effect",obj.data.interventionEffect);
            getexdictlist("exp_edit_microorganism","microorganism",obj.data.microorganism);
            getexdictlist("exp_edit_strain_variation","strain_variation",obj.data.strainVariation);
            getexdictlist("exp_edit_bacteria_metabolism","bacteria_metabolism",obj.data.bacteriaMetabolism);
            getexdictlist("exp_edit_physiological_process","physiological_process",obj.data.physiologicalProcess);
            getexdictlist("exp_edit_physiological_process_change","physiological_process_change",obj.data.physiologicalProcessChange);
            getexdictlist("exp_edit_intervention_note","intervention_note",obj.data.interventionNote);
            getexdictlist("exp_edit_source_element","source_element",obj.data.sourceElement);
            getexdictlist("exp_edit_hostName","host_name",obj.data.hostName);
            getexdictlist("exp_edit_animal_model","animal_model",obj.data.animalModel);
            getDocumentlist("edit_document_insList","",obj.data.documentId);
        })
    });
    //编辑取消
    $('#exp_edit_cancelBtn,#exp_add_cancelB,#exp_edit_cancelB').unbind("click");
    $("#exp_edit_cancelBtn,#exp_add_cancelB,#exp_edit_cancelB").on("click",function(){
        $("#exp_widget-grid").show().siblings().hide();
        $("#exp_btns,#regionList_exp_div,#exp_tab_ul").show();
        $("#btn_exp_edit,#btn_exp_delete").addClass("disabled");
        $('input[name="cbx_exp_list"]').attr("checked",false);
    });
    //编辑
    $('#exp_editBtn').unbind("click");
    $("#exp_editBtn").on("click",function(){
    	//实验结果类型
        var _expTypeEdit = $.trim($("#exp_edit_type").val());
        //疾病id
        var _diseaseNameEdit = $.trim($("#exp_edit_diseaseId").val());
        //实验类型：干预、观察
        var _expResultTypeEdit = $.trim($("#exp_edit_result_type").val());
        //干预物
        var _interventionEdit = $.trim($("#exp_edit_intervention").val());
        //干预物影响
        var _interventionEffectEdit = $.trim($("#exp_edit_intervention_effect").val());
        //微生物
        var _microorganismEdit = $.trim($("#exp_edit_microorganism").val());
        //菌种变化
        var _strainVariationEdit = $.trim($("#exp_edit_strain_variation").val());
        //菌代谢物质
        var _bacteriaMetabolismEdit = $.trim($("#exp_edit_bacteria_metabolism").val());
        //生理过程
        var _physiologicalProcessEdit = $.trim($("#exp_edit_physiological_process").val());
        //生理过程变化
        var _physiologicalProcessChangeEdit = $.trim($("#exp_edit_physiological_process_change").val());
        //干预物注释
        var _interventionNoteEdit = $.trim($("#exp_edit_intervention_note").val());
        //引发源
        var _sourceElementEdit = $.trim($("#exp_edit_source_element").val());
        //宿主
        var _hostNameEdit = $.trim($("#exp_edit_hostName").val());
        //动物模型/人群特征
        var _animalModelEdit = $.trim($("#exp_edit_animal_model").val());
        var _documentId = $.trim($("#edit_document_insList").val());
        var data = {
        		experimentalId:sel_exp_id,
        		type:_expResultTypeEdit,//实验结果类型
        		diseaseId: _diseaseNameEdit,//疾病id
        		intervention:_interventionEdit,//干预物
        		interventionEffect:_interventionEffectEdit,//干预物影响
        		microorganism: _microorganismEdit,//微生物
        		strainVariation: _strainVariationEdit,//菌种变化
        		physiologicalProcess: _physiologicalProcessEdit,//生理过程
        		physiologicalProcessChange: _physiologicalProcessChangeEdit,//负科相关
        		experimentType: _expTypeEdit,//
        		hostName: _hostNameEdit,//
        		animalModel: _animalModelEdit,//
                bacteriaMetabolism: _bacteriaMetabolismEdit,//
                interventionNote: _interventionNoteEdit,//
                sourceElement: _sourceElementEdit,//
                documentId: _documentId//
        		};
        
//         var data = {productId: sel_product_id,regionId: regionId ,billUnitCount: billUnitCount,price: price ,unitCountMin: unitCountMin ,unitCountMax: unitCountMax,description:description,units:units};
        doPost("/action/experimentalResult/update",data,function(objs){
            if(objs.httpCode=="200"){
                showMsg("温馨提示","编辑成功。");
                loadexpTable();
                $("#exp_widget-grid").show().siblings().hide();
                $("#exp_btns,#regionList_exp_div,#exp_tab_ul").show();
            }else{
                console.log("code :" + objs.code + "  msg:" + objs.message);
                showErrorMsg("","code :" + objs.code + "  msg:" + objs.message);
            }
        });

    });

    //点击tr赋值
}

function loadexpTableRegion(id){
    $(id).addClass("btn-primary").siblings().removeClass("btn-primary");
    loadexpTable(id);
}
/**
 * 修改实验类型
 */
function changeExperimentalType(){
	
}
/**
 * 修改实验结果类型
 */
function changeResultType(modal,id){
	var resultType=$("#"+id).val();
    console.log(resultType);
	switch (Number(resultType)){
	case 0:
        $("#"+modal+" .ex_type_b,#"+modal+" .ex_type_c,#"+modal+" .ex_type_d,#"+modal+" .ex_type_e,#"+modal+" .ex_type_f,#"+modal+" .ex_type_g").hide();
        $("#"+modal+" .ex_type_a").show();
		break;
	case 1://疾病
        $("#"+modal+" .ex_type_a,#"+modal+" .ex_type_c,#"+modal+" .ex_type_d,#"+modal+" .ex_type_e,#"+modal+" .ex_type_f,#"+modal+" .ex_type_g").hide();
        $("#"+modal+" .ex_type_b").show();
		break;
	case 2:
        $("#"+modal+" .ex_type_a,#"+modal+" .ex_type_b,#"+modal+" .ex_type_d,#"+modal+" .ex_type_e,#"+modal+" .ex_type_f,#"+modal+" .ex_type_g").hide();
        $("#"+modal+" .ex_type_c").show();
		break;
	case 3:
        $("#"+modal+" .ex_type_a,#"+modal+" .ex_type_b,#"+modal+" .ex_type_c,#"+modal+" .ex_type_e,#"+modal+" .ex_type_f,#"+modal+" .ex_type_g").hide();
        $("#"+modal+" .ex_type_d").show();
		break;
	case 4:
        $("#"+modal+" .ex_type_a,#"+modal+" .ex_type_c,#"+modal+" .ex_type_c,#"+modal+" .ex_type_d,#"+modal+" .ex_type_f,#"+modal+" .ex_type_g").hide();
        $("#"+modal+" .ex_type_e").show();
		break;
    case 5:
        $("#"+modal+" .ex_type_b,#"+modal+" .ex_type_c,#"+modal+" .ex_type_d,#"+modal+" .ex_type_a,#"+modal+" .ex_type_e,#"+modal+" .ex_type_g").hide();
        $("#"+modal+" .ex_type_f").show();
        break;
    case 6:
        $("#"+modal+" .ex_type_b,#"+modal+" .ex_type_c,#"+modal+" .ex_type_d,#"+modal+" .ex_type_a,#"+modal+" .ex_type_e,#"+modal+" .ex_type_f").hide();
        $("#"+modal+" .ex_type_g").show();
        break;
	}
}
    function getDocumentList(){

    }

function vDocument(){
    var ins = $("#document_insList").val();
    if(ins==null||ins==""){
        $("#document_insList_block").html("请选择云主机");
        $("#document-up-ins").removeClass('has-success').addClass('has-error');
//        $("#btn_diskUp_confirm").removeClass('btn-primary').addClass("disabled").addClass('txt-color-darken');
    }else{
        $("#document_insList_block").html("");
        $("#document-up-ins").removeClass('has-error').addClass('has-success');
//        $("#btn_documentUp_confirm").addClass('btn-primary').removeClass("disabled").removeClass('txt-color-darken');
    }
}
</script>